<%
	user ||= @user
	@properties = user.method(:properties).call
	
	pwd_required = user.new_record? ? ' *' : ''
	
	@show_delete = false
	@show_required_field_message = true

-%>

<%= text_field	:forename,				:label => 'First name *',			:maxlength => @properties[:forename].length %> 
<%= text_field	:name,						:label => 'Surname *',				:maxlength => @properties[:name].length %>
<%= text_field	:preferred_name,	:label => 'Preferred name *',	:maxlength => @properties[:preferred_name].length %>
<%= text_field	:login,						:label => 'Login name *',			:maxlength => @properties[:login].length %> 
<%= select			:company_id,			:label => 'Primary co. *',		:selected  => user.company_id.to_s, :collection => Company.all( :order => [ :is_active.desc, :name ] ), :value_method => :id, :text_method => :display_name, :class => 'width2Fields' %>
<%= text_field	:email,						:label => 'Email address',		:maxlength => @properties[:email].length,						:class => 'width2Fields' %> 
<%= text_field	:signature_file,	:label => 'Signature file',		:maxlength => @properties[:signature_file].length,	:class => 'width2Fields' %>
<%= text_field	:portrait_file,		:label => 'Portrait file',		:maxlength => @properties[:portrait_file].length,		:class => 'width2Fields' %>
<%= text_area		:profile,					:label => 'Profile',					:maxlength => @properties[:profile].length,					:class => 'width2Fields' %> 
<%= check_box		:is_active,				:label => 'Active' %>
<hr/><br/>
<%= text_field	:password,							:label => "New password#{ pwd_required }",			:maxlength => 10 %> 
<%= text_field	:password_confirmation,	:label => "Confirm new password#{ pwd_required }",	:maxlength => 10 %> 
